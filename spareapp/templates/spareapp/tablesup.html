<html>
    <thead id="hMain" class="">
        <tr class="color text-white dnd-moved">
            <th id="code" class="trsup color" style="position: sticky;top: 70;display: none;"><i onclick="sort(0,'asc')" class="bi bi-arrow-up-short"></i><span>Code</span></th>
            <th id="editSpare" class="trsup color" style="position: sticky;top: 70;"><i onclick="sort(1,'asc')" class="bi bi-arrow-up-short"></i><span>Edit</span></th>
            <th id="referenceC" class="trsup color" style="position: sticky;top: 70;"><i onclick="sort(2,'asc')" class="bi bi-arrow-up-short"></i><span>Ref. Code</span></th>
            <th id="car" class="trsup color" style="position: sticky;top: 70;"><i onclick="sort(3,'asc')" class="bi bi-arrow-up-short"></i><span>Car</span></th>
            <th id="engine" class="trsup color" style="position: sticky;top: 70;"><i onclick="sort(4,'asc')" class="bi bi-arrow-up-short"></i><span>Engine</span></th>
            <th id="brand" class="trsup color" style="position: sticky;top: 70;display: none;"><i onclick="sort(5,'asc')" class="bi bi-arrow-up-short"></i><span>Brand</span></th>
            <th id="category" class="trsup color" style="position: sticky;top: 70;"><i onclick="sort(6,'asc')" class="bi bi-arrow-up-short"></i><span>Category</span></th>
            <!-- <th id="subcategory" class="trsup color" style="position: sticky;top: 70;">Sub-Category</th> -->
            <th id="type" class="trsup color" style="position: sticky;top: 70;display: none;"><i onclick="sort(7,'asc')" class="bi bi-arrow-up-short"></i><span>Description</span></th>
            {% if request.user.profile.ventas or request.user.is_superuser or request.user.profile.bodega %}
            <th id="atributes" class="trsup color" style="position: sticky;top: 70;"><i onclick="sort(8,'asc')" class="bi bi-arrow-up-short"></i><span>Atributes</span></th>
            {% endif %}
            {% if request.user.profile.ventas or request.user.is_superuser or request.user.profile.bodega %}
            <th id="dimensions" class="trsup color" style="position: sticky;top: 70;display: none;"><i onclick="sort(9,'asc')" class="bi bi-arrow-up-short"></i><span>Dimensions</span></th>
            {% endif %}
            {% if request.user.is_superuser %}
            <th id="priceM" class="trsup color" style="position: sticky;top: 70;display: none;"><i onclick="sort(10,'asc')" class="bi bi-arrow-up-short"></i><span>Price Major</span></th>
            <th id="priceD" class="trsup color" style="position: sticky;top: 70;display: none;"><i onclick="sort(11,'asc')" class="bi bi-arrow-up-short"></i><span>Price Det.</span></th>
            {% endif %}
            <th id="photo" class="trsup color" style="position: sticky;top: 70;">Photo</th>
            {% if parameter == 'Engine code' %}
            <th id="ecode" class="trsup color" style="position: sticky;top: 70;"><i onclick="sort(13,'asc')" class="bi bi-arrow-up-short"></i><span>Eng. code</span></th>
            {% endif %}
            {% if request.user.profile.ventas or request.user.is_superuser or request.user.profile.bodega %}
            <th id="vendor" class="trsup color" style="position: sticky;top: 70;display: none;"><i onclick="sort(14,'asc')" class="bi bi-arrow-up-short"></i><span>Vendor</span></th>
            {% endif %}
            {% if request.user.is_authenticated %}
            <th id="check" class="trsup color" style="position: sticky;top: 70;"><input class="check" type="checkbox" onClick="toggle(this,'toAdd')"/></th>
            {% endif %}
        </tr>
    </thead>
</html>

<script>
function sort(a,b){
    var table, rows, switching, i, x, y, shouldSwitch, change;
    table = document.getElementById("myTable").getElementsByTagName("tr")
    if(b == 'desc'){
        $("#hMain th")[a].innerHTML = '<i onclick="sort('+a+',\'asc\')" class="bi bi-arrow-up-short"></i><span>'+$("#hMain th")[a].getElementsByTagName("span")[0].innerHTML+'</span>'
    }else{
        $("#hMain th")[a].innerHTML = '<i onclick="sort('+a+',\'desc\')" class="bi bi-arrow-down-short"></i><span>'+$("#hMain th")[a].getElementsByTagName("span")[0].innerHTML+'</span>'
    }
    switching = true;
    i = 0
    while (switching){
        switching = false;
        rows = table.length;
        for (i = 0; i < (rows -1); i++){
            shouldSwitch = false;
            if($("#hMain th")[a].getAttribute("id")=="editSpare"){
                x = table[i].getElementsByTagName("td")[a].getElementsByTagName("a")[0].innerHTML.toLowerCase()
                y = table[i + 1].getElementsByTagName("td")[a].getElementsByTagName("a")[0].innerHTML.toLowerCase()
            }else{
                x = table[i].getElementsByTagName("td")[a].innerHTML.toLowerCase()
                y = table[i + 1].getElementsByTagName("td")[a].innerHTML.toLowerCase()
            }
            if (b == 'desc'){
                if (x > y) {
                    shouldSwitch = true;
                    break;
                }
            }else{
                if(x < y){
                    shouldSwitch = true;
                    break;
                }
            }
        }
        if (shouldSwitch){
            table[i].parentNode.insertBefore(table[i + 1], table[i]);
            switching = true;
        }
    }
}
</script>