{% extends "spareapp/contBase.html" %}

{% block title %} Day {% endblock %}

{% block content %}

<div class="container mt-5 col-lg-4">
<form action="" method="POST">
    {% csrf_token %}
    <div class="mb-3">
        <label class="form-label" for="contNombre">Customer</label>
        <select name="contNombre" id="contNombre" class="form-select form-select-md" aria-label=".form-select-md example">
            <option value="" selected>Select customer</option>
            {% for cust in allCustomers %}
            <option value="{{cust.id}}">{{cust.nombre}} - {{cust.documento}}</option>
            {% endfor %}
        </select>
    </div>
    <button class="btn btn-primary" type="submit">Accept</button>
</form>
</div>
{% if factureName %}
<div class="container mt-2">
<a href="#" id="downloadexcel" class="btn btn-success">Excel</a>
<a href="#" onClick="generatePDF()" class="btn btn-success">PDF</a>
</div>
<div class="container mt-2">
<label for=""><span style="font-weight: bold;color: rgb(136,12,12);">Customer: </span>{{factureName.0.refPersona.nombre}}</label>
<table id="invoice" style="font-size: small;" class="table-bordered invoice table-sortable mt-2 mb-2">
    <thead>
        <tr class="color text-white">
            <th class="p-2">Fact #</th>
            <th class="p-2">Date</th>
            <th class="p-2">Type</th>
            <th class="p-2">Debito</th>
            <th class="p-2">Credito</th>
            <th class="p-2">Balance</th>
        </tr>
    </thead>
    <tbody id="myTable">
        {% for fact in factureName %}
        <tr>
            <td class="p-2">{{fact.num}}</td>
            <td class="p-2">{{fact.fechaCreado|date:"M d, Y"}}</td>
            <td class="p-2">{{fact.refType.nombre}}</td>
            {% if fact.refCategory.ingreso == True %}
            <td class="p-2">{{fact.total|floatformat:2}}</td>
            {% else %}
            <td class="p-2">0.00</td>
            {% endif %}
            {% if fact.refCategory.egreso == True %}
            <td class="p-2">{{fact.total|floatformat:2}}</td>
            {% else %}
            <td class="p-2">0.00</td>
            {% endif %}
            <td class="p-2">0.00</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>
<div class="container mb-5 table-bordered">
<table>
    <tr>
        <td style="width: 80px;" class="p-2 color text-white">Total</td>
        <td class="p-2">$ 0.00</td>
    </tr>
</table>
</div>

{% endif %}

{% endblock %}